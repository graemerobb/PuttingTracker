<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>MicScore Stats</title>
  <link rel="stylesheet" href="dash-styles.css" />
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="title">Welcome to MicScore Stats</div>
    </div>

    <div class="controls">
      <div class="left">
        <label for="sectionSelect">View</label>
        <select id="sectionSelect">
          <option value="today" selected>Today’s round</option>
          <option value="performance">My Performance</option>
          <option value="group">Group insights</option>
          <option value="workouts">Golf workouts</option>
        </select>
      </div>
    </div>

    <div class="main">
      <!-- TODAY -->
      <div class="section active" id="sec-today">
        <div class="panel">
          <h3>Headline</h3>
          <p>
            <strong><span id="grossScore">77</span> Gross</strong>,
            that’s <strong><span id="grossRank">4th</span> best gross</strong> today,
            and <strong><span id="oddsText">1 in 200</span></strong> for a
            <strong><span id="handicapValue">4</span> handicap</strong>.
          </p>
          <p><span id="parStreakLine">6 hole par streak - 3th through 9th</span></p>
        </div>

        <div class="grid2">
          <div class="panel grey">
            <h3 class="h3Row">
              <span>Strokes gained</span>

              <span class="infoWrap">
                <button class="infoBtn" id="sgInfoBtn" aria-label="Strokes gained info" type="button">i</button>
                <span class="tooltip" id="sgTooltip" role="tooltip" aria-hidden="true">
                  <strong>Strokes gained</strong> shows how many shots you gained or lost compared to the selected baseline.
                  <br><br>
                  To compare vs handicap, use the <strong>SG view</strong> selector in the bottom bar.
                </span>
              </span>
            </h3>

            <div class="chiprow" id="sgGainedChips"></div>
          </div>

          <div class="panel grey">
            <h3>Strokes lost</h3>
            <div class="chiprow" id="sgLostChips"></div>
          </div>
        </div>

        <div class="panel">
          <h3>Today’s round flow</h3>
          <div class="chartWrap">
            <canvas id="flowChart"></canvas>
          </div>
        </div>

        <div class="grid2">
          <div class="panel grey">
            <h3>Personal targets</h3>
            <div class="targets">
              <div class="targetRow ok">
                <span class="tLabel">No doubles</span>
                <span class="tStatus">Success</span>
              </div>
              <div class="targetRow bad">
                <span class="tLabel">No 3 putts</span>
                <span class="tStatus">Fail</span>
              </div>
              <div class="targetRow ok">
                <span class="tLabel">No bogies on par 5s</span>
                <span class="tStatus">Success</span>
              </div>
            </div>
          </div>

          <div class="panel grey">
            <h3 class="h3Row">
              <span class="h3RowLeft">
                <span>My friends</span>
              </span>
              <button class="addBtn" id="addFriendBtn" aria-label="Add friend" type="button">+</button>
            </h3>
            <p><span id="friendLine1">You beat Bryan by 6 shots on hole 3. He got an 8.</span></p>
            <p><span id="friendLine2">You had the most birdies today.</span></p>
          </div>
        </div>
      </div>

      <!-- PERFORMANCE -->
      <div class="section" id="sec-performance">
        <div class="panel">
          <h3>My Performance</h3>
          <p class="subtle">Just the facts. Trends from recent rounds.</p>
        </div>

        <div class="panel grey">
          <div class="rowHeader">
            <h3 style="margin:0;">Last <span id="perfRoundsN">20</span> rounds</h3>
            <div class="rowHeaderRight">
              <label for="perfTimeframe" class="miniLabel">Timeframe</label>
              <select id="perfTimeframe" class="miniSelect" aria-label="Change time frame">
                <option value="20" selected>Last 20</option>
                <option value="10">Last 10</option>
                <option value="50">Last 50</option>
              </select>
            </div>
          </div>

          <div class="factsGrid">
            <div class="fact">
              <div class="factLabel">Average gross</div>
              <div class="factValue" id="avgGross">79.4</div>
            </div>
            <div class="fact">
              <div class="factLabel">Variance range</div>
              <div class="factValue" id="varRange">74–88</div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="rowHeader">
            <h3 style="margin:0;">Variance</h3>
            <button class="outlineBtn" id="insightAvailBtn" type="button">Insight available</button>
          </div>
          <div class="chartWrap">
            <canvas id="varianceChart"></canvas>
          </div>
          <div class="miniNote">
            Bell curve with skew. Center line at your average gross.
          </div>
        </div>

        <div class="grid2">
          <div class="panel grey">
            <h3>Bad holes</h3>
            <div class="list" id="badHolesList"></div>
          </div>

          <div class="panel grey">
            <h3>Good holes</h3>
            <div class="list" id="goodHolesList"></div>
          </div>
        </div>

        <div class="grid2">
          <div class="panel grey">
            <h3>Scoring</h3>
            <div class="list">
              <div class="listRow">
                <span>Double bogey average</span>
                <span><strong id="dblAvg">2.2</strong> / round</span>
              </div>
              <div class="listRow subtleRow">
                <span>Target</span>
                <span><strong id="dblTarget">1.2</strong></span>
              </div>

              <div class="divider"></div>

              <div class="listRow">
                <span>Birdie average</span>
                <span><strong id="birdAvg">1.1</strong> / round</span>
              </div>
              <div class="listRow subtleRow">
                <span>Target</span>
                <span><strong id="birdTarget">1.6</strong></span>
              </div>
            </div>
          </div>

          <div class="panel grey">
            <h3>Flow facts</h3>
            <div class="list">
              <div class="listRow">
                <span>Bad starts</span>
                <span><strong id="badStarts">3</strong>/<span id="badStartsOutOf">20</span> rounds (+6 through 3)</span>
              </div>

              <div class="divider"></div>

              <div class="listRow">
                <span class="withInfo">
                  Avg score after double bogey
                  <span class="infoWrap">
                    <button class="infoBtn small" data-tooltip="afterDblTip" type="button">i</button>
                    <span class="tooltip" id="afterDblTip" aria-hidden="true">
                      You had <strong>6</strong> doubles. Average response is <strong>+0.3</strong>.
                      <br><br>
                      Birdie following a double is currently good.
                    </span>
                  </span>
                </span>
                <span><strong id="afterDbl">+0.3</strong></span>
              </div>
            </div>
          </div>
        </div>

        <div class="panel grey">
          <h3>Streaks</h3>
          <div class="list">
            <div class="listRow">
              <span>Longest birdie streak</span>
              <span><strong id="birdStreak">3</strong> <a class="miniLink" href="#" id="birdStreakLink">view round</a></span>
            </div>
            <div class="listRow">
              <span class="withInfo">
                Longest bogey streak
                <span class="infoWrap">
                  <button class="infoBtn small" data-tooltip="bogeyStreakTip" type="button">i</button>
                  <span class="tooltip" id="bogeyStreakTip" aria-hidden="true">
                    This is typically a “momentum leak”. Consider guardrails after the first bogey.
                  </span>
                </span>
              </span>
              <span>
                <strong id="bogeyStreak">5</strong>
                <a class="miniLink" href="#" id="bogeyStreakLink">view round</a>
              </span>
            </div>
            <div class="listRow subtleRow">
              <span>Occurrences</span>
              <span><strong id="bogeyOcc">5</strong></span>
            </div>
          </div>
        </div>
      </div>

      <!-- GROUP -->
      <div class="section" id="sec-group">
        <div class="panel">
          <h3>Group insights</h3>
          <p>Competition insights and social banter.</p>
        </div>
      </div>

      <!-- WORKOUTS -->
      <div class="section" id="sec-workouts">
        <div class="panel">
          <h3>Golf workouts</h3>
          <p>Workouts to capture PBs and compare with friends.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Add friend modal -->
  <div class="modalOverlay" id="friendModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="friendModalTitle">
      <div class="modalTitle" id="friendModalTitle">Add a friend</div>
      <div class="modalBody">
        <p>Enter a name to add to your friends list.</p>
        <div class="modalField">
          <label for="friendNameInput">Friend name</label>
          <input id="friendNameInput" type="text" placeholder="e.g. Bryan" inputmode="text" autocomplete="off" />
        </div>
      </div>
      <div class="modalActions">
        <button class="modalBtn secondary" id="friendCancelBtn" type="button">Cancel</button>
        <button class="modalBtn" id="friendAddBtn" type="button">Add</button>
      </div>
    </div>
  </div>

  <!-- Insight modal -->
  <div class="modalOverlay" id="perfInsightModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="perfInsightTitle">
      <div class="modalTitle" id="perfInsightTitle">Insight</div>
      <div class="modalBody">
        <p><strong>Left skew:</strong> You might be giving up too much.</p>
      </div>
      <div class="modalActions">
        <button class="modalBtn" id="perfInsightCloseBtn" type="button">Close</button>
      </div>
    </div>
  </div>

  <!-- Bottom global controls -->
  <div class="bottomBar">
    <div>
      <label for="roleSelect">Role</label>
      <select id="roleSelect">
        <option value="golfer" selected>Golfer</option>
        <option value="pro">Club Pro</option>
        <option value="admin">Club Admin</option>
      </select>
    </div>

    <div>
      <label for="sgModeSelect">SG view</label>
      <select id="sgModeSelect">
        <option value="gross" selected>SG on today’s field (gross)</option>
        <option value="handicap">SG on handicap</option>
        <option value="selected">SG on selected handicap</option>
      </select>
    </div>
  </div>

  <script src="dash-app.js"></script>
</body>
</html>
